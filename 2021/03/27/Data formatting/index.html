
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="이상권의 개발노트">
    <title>Data formatting - 이상권의 개발노트</title>
    <meta name="author" content="이상권">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"이상권","sameAs":["https://github.com/Earth-KOR","https://www.instagram.com/kwon_27_/?hl=ko","mailto:lsk941017@naver.com"],"image":"profile.jpg"},"articleBody":"데이터를 formatting 하는 방법기본적으로 프론트에 reture 하는 값은 Entity 자체를 그대로 리턴하면 안된다.따라서 필요한 데이터만 return 해주기 위해서 새로운 reture DTO를 만들고 보내줘야하는데모든 값들을 해당 DTO로 하나씩 손으로 넣어 주려면 시간이 많이 걸린다.이런 문제를 대비해서 깔끔하게 만들 수 있는 방법은 다음과 같다.\n\nConvert\n\n1)) 처음에는 @Mapper 가 등록된 하나의 interface를 만들어야 한다.\n@Mapper(componentModel = “spring”, unmappedTargetPolicy = ReportingPolicy.IGNORE, imports = {CarManualCarCode.class, Collectors.class})public interface CarManualMapper{}\n2)) 들어오는 객체와 바꿀 객체를 정하고 메서드를 만들어 준다.\nCarInstallManual convert(CarRequestManualDTO source);\n3)) 이렇게만 선언하면 모든 걸 다 바꾸기 때문에 무시할건 무시하고 이름이 맞지 않는건 우리가 커스터마이징이 가능하다.\n@Mapping(source = “locationOfFuseBoxType”, target = “locationOfFuseBox”)\n\n컬럼명이 다를때\n\n@Mapping(target = “carManualCarCodes”, ignore = true)\n\n변경하지않을 컬럼을 지정할때\n\n@Mapping(expression = “java(source.getCarManualCarCodes().stream().map(CarManualCarCode::getModelCode).collect(Collectors.toList()))”, target = “modelCodes”)\n\nSpring이 만든 코드를 쓰지않고 내가 직접 만들고싶을때\n\n4)) 이대로 bulid를 하면 자동으로 SetGet코드를 만들어 준다.\n\n생성자\n\n1)) 하나의 DTO를 만들고 바꾸고 싶은것만 지정해서 생성자를 만들어준다\n@AllArgsConstructor@NoArgsConstructor@Datapublic class CarManualListDTO implements Serializable{\nprivate Long id;\nprivate String pathOfDiagramImage;\nprivate ManualImage manualImage1;\nprivate ManualImage manualImage2;\nprivate String modelSubName;\nprivate String releasedYear;\nprivate FuseType fuseType;\nprivate String manufacturer;\nprivate String note;\nprivate LocationOfFuseBoxType locationOfFuseBoxType;\nprivate NumberOfFuseBoxType numberOfFuseBoxType;\nprivate Boolean isDeleted;\nprivate LocalDateTime lastDeletedDateTime;\nprivate LocalDateTime createdAt;\nprivate List&lt;CarManualCarCode&gt; ModelCodes;\nprivate String pathOfNoteImage;\n\npublic CarManualListDTO(CarInstallManual carInstallManual)\n&#123;\n    this.id = carInstallManual.getId();\n    this.pathOfDiagramImage = carInstallManual.getPathOfDiagramImage();\n    this.manualImage1 = carInstallManual.getManualImage_1();\n    this.manualImage2 = carInstallManual.getManualImage_2();\n    this.modelSubName = carInstallManual.getModelSubName();\n    this.releasedYear = carInstallManual.getReleasedYear();\n    this.fuseType = carInstallManual.getFuseType();\n    this.manufacturer = carInstallManual.getManufacturer();\n    this.note = carInstallManual.getNote();\n    this.locationOfFuseBoxType = carInstallManual.getLocationOfFuseBox();\n    this.numberOfFuseBoxType = carInstallManual.getNumberOfFuseBox();\n    this.isDeleted = carInstallManual.getIsDeleted();\n    this.lastDeletedDateTime = carInstallManual.getLastDeletedDateTime();\n    this.createdAt = carInstallManual.getCreatedAt();\n    this.pathOfNoteImage = carInstallManual.getPathOfNoteImage();\n    this.ModelCodes = checkIsDeletedCarCode(carInstallManual.getCarManualCarCodes());\n&#125;\n2)) 생성자를 넣을 때 조건문을 넣고 싶다면 하나의 새로운 메서드를 생성하고 거기다가 조건을 적어주면 된다!\nprivate List checkIsDeletedCarCode(List carCodes){    return carCodes.stream().filter((i) -&gt; i.getIsDeleted() == false).collect(Collectors.toList());}}\n","dateCreated":"2021-03-27T11:44:09-07:00","dateModified":"2021-03-28T03:47:58-07:00","datePublished":"2021-03-27T11:44:09-07:00","description":"","headline":"Data formatting","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://earth-kor.github.io/2021/03/27/Data%20formatting/"},"publisher":{"@type":"Organization","name":"이상권","sameAs":["https://github.com/Earth-KOR","https://www.instagram.com/kwon_27_/?hl=ko","mailto:lsk941017@naver.com"],"image":"profile.jpg","logo":{"@type":"ImageObject","url":"profile.jpg"}},"url":"https://earth-kor.github.io/2021/03/27/Data%20formatting/","keywords":"Spring, 개발노트"}</script>
    <meta name="description" content="데이터를 formatting 하는 방법기본적으로 프론트에 reture 하는 값은 Entity 자체를 그대로 리턴하면 안된다.따라서 필요한 데이터만 return 해주기 위해서 새로운 reture DTO를 만들고 보내줘야하는데모든 값들을 해당 DTO로 하나씩 손으로 넣어 주려면 시간이 많이 걸린다.이런 문제를 대비해서 깔끔하게 만들 수 있는 방법은 다음과 같다">
<meta property="og:type" content="blog">
<meta property="og:title" content="Data formatting">
<meta property="og:url" content="https://earth-kor.github.io/2021/03/27/Data%20formatting/index.html">
<meta property="og:site_name" content="이상권의 개발노트">
<meta property="og:description" content="데이터를 formatting 하는 방법기본적으로 프론트에 reture 하는 값은 Entity 자체를 그대로 리턴하면 안된다.따라서 필요한 데이터만 return 해주기 위해서 새로운 reture DTO를 만들고 보내줘야하는데모든 값들을 해당 DTO로 하나씩 손으로 넣어 주려면 시간이 많이 걸린다.이런 문제를 대비해서 깔끔하게 만들 수 있는 방법은 다음과 같다">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-03-27T18:44:09.000Z">
<meta property="article:modified_time" content="2021-03-28T10:47:58.328Z">
<meta property="article:author" content="이상권">
<meta property="article:tag" content="Spring">
<meta property="article:tag" content="개발노트">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://earth-kor.github.io/assets/images/profile.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            이상권의 개발노트
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">이상권</h4>
                
                    <h5 class="sidebar-profile-bio"><p>미래의 백엔드 개발자</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/index"
                            
                            rel="noopener"
                            title="홈"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">홈</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="카테고리"
                        >
                        <i class="sidebar-button-icon fa fa-code" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">카테고리</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="태그"
                        >
                        <i class="sidebar-button-icon fa fa-tag" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="기록"
                        >
                        <i class="sidebar-button-icon fa fa-running" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">기록</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/Earth-KOR"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.instagram.com/kwon_27_/?hl=ko"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="instagram"
                        >
                        <i class="sidebar-button-icon fab fa-instagram" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">instagram</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="mailto:lsk941017@naver.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Data formatting
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2021-03-27T11:44:09-07:00">
	
		    Mar 27, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%EA%B0%9C%EB%B0%9C%EB%85%B8%ED%8A%B8/">개발노트</a>, <a class="category-link" href="/categories/%EA%B0%9C%EB%B0%9C%EB%85%B8%ED%8A%B8/Spring/">Spring</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <h1 id="데이터를-formatting-하는-방법"><a href="#데이터를-formatting-하는-방법" class="headerlink" title="데이터를 formatting 하는 방법"></a>데이터를 formatting 하는 방법</h1><p>기본적으로 프론트에 reture 하는 값은 Entity 자체를 그대로 리턴하면 안된다.<br>따라서 필요한 데이터만 return 해주기 위해서 새로운 reture DTO를 만들고 보내줘야하는데<br>모든 값들을 해당 DTO로 하나씩 손으로 넣어 주려면 시간이 많이 걸린다.<br>이런 문제를 대비해서 깔끔하게 만들 수 있는 방법은 다음과 같다.</p>
<ol>
<li>Convert</li>
</ol>
<p>1)) 처음에는 @Mapper 가 등록된 하나의 interface를 만들어야 한다.</p>
<p>@Mapper(componentModel = “spring”, unmappedTargetPolicy = ReportingPolicy.IGNORE, imports = {CarManualCarCode.class, Collectors.class})<br>public interface CarManualMapper<br>{<br>}</p>
<p>2)) 들어오는 객체와 바꿀 객체를 정하고 메서드를 만들어 준다.</p>
<p>CarInstallManual convert(CarRequestManualDTO source);</p>
<p>3)) 이렇게만 선언하면 모든 걸 다 바꾸기 때문에 무시할건 무시하고 이름이 맞지 않는건 우리가 커스터마이징이 가능하다.</p>
<p>@Mapping(source = “locationOfFuseBoxType”, target = “locationOfFuseBox”)</p>
<ul>
<li>컬럼명이 다를때</li>
</ul>
<p>@Mapping(target = “carManualCarCodes”, ignore = true)</p>
<ul>
<li>변경하지않을 컬럼을 지정할때</li>
</ul>
<p>@Mapping(expression = “java(source.getCarManualCarCodes().stream().map(CarManualCarCode::getModelCode).collect(Collectors.toList()))”, target = “modelCodes”)</p>
<ul>
<li>Spring이 만든 코드를 쓰지않고 내가 직접 만들고싶을때</li>
</ul>
<p>4)) 이대로 bulid를 하면 자동으로 SetGet코드를 만들어 준다.</p>
<ol start="2">
<li>생성자</li>
</ol>
<p>1)) 하나의 DTO를 만들고 바꾸고 싶은것만 지정해서 생성자를 만들어준다</p>
<p>@AllArgsConstructor<br>@NoArgsConstructor<br>@Data<br>public class CarManualListDTO implements Serializable<br>{</p>
<pre><code>private Long id;
private String pathOfDiagramImage;
private ManualImage manualImage1;
private ManualImage manualImage2;
private String modelSubName;
private String releasedYear;
private FuseType fuseType;
private String manufacturer;
private String note;
private LocationOfFuseBoxType locationOfFuseBoxType;
private NumberOfFuseBoxType numberOfFuseBoxType;
private Boolean isDeleted;
private LocalDateTime lastDeletedDateTime;
private LocalDateTime createdAt;
private List&lt;CarManualCarCode&gt; ModelCodes;
private String pathOfNoteImage;

public CarManualListDTO(CarInstallManual carInstallManual)
&#123;
    this.id = carInstallManual.getId();
    this.pathOfDiagramImage = carInstallManual.getPathOfDiagramImage();
    this.manualImage1 = carInstallManual.getManualImage_1();
    this.manualImage2 = carInstallManual.getManualImage_2();
    this.modelSubName = carInstallManual.getModelSubName();
    this.releasedYear = carInstallManual.getReleasedYear();
    this.fuseType = carInstallManual.getFuseType();
    this.manufacturer = carInstallManual.getManufacturer();
    this.note = carInstallManual.getNote();
    this.locationOfFuseBoxType = carInstallManual.getLocationOfFuseBox();
    this.numberOfFuseBoxType = carInstallManual.getNumberOfFuseBox();
    this.isDeleted = carInstallManual.getIsDeleted();
    this.lastDeletedDateTime = carInstallManual.getLastDeletedDateTime();
    this.createdAt = carInstallManual.getCreatedAt();
    this.pathOfNoteImage = carInstallManual.getPathOfNoteImage();
    this.ModelCodes = checkIsDeletedCarCode(carInstallManual.getCarManualCarCodes());
&#125;</code></pre>
<p>2)) 생성자를 넣을 때 조건문을 넣고 싶다면 하나의 새로운 메서드를 생성하고 거기다가 조건을 적어주면 된다!</p>
<p>private List<CarManualCarCode> checkIsDeletedCarCode(List<CarManualCarCode> carCodes)<br>{<br>    return carCodes.stream().filter((i) -&gt; i.getIsDeleted() == false).collect(Collectors.toList());<br>}<br>}</p>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/Spring/" rel="tag">Spring</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/%EA%B0%9C%EB%B0%9C%EB%85%B8%ED%8A%B8/" rel="tag">개발노트</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a
                        class="post-action-btn btn btn--disabled"
                        aria-hidden="true"
                    >
                        
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2021/03/27/Dirty%20checking/"
                    data-tooltip="Dirty checking"
                    aria-label="NEXT: Dirty checking"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2021 이상권. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a
                        class="post-action-btn btn btn--disabled"
                        aria-hidden="true"
                    >
                        
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2021/03/27/Dirty%20checking/"
                    data-tooltip="Dirty checking"
                    aria-label="NEXT: Dirty checking"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                

            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">이상권</h4>
        
            <div id="about-card-bio"><p>미래의 백엔드 개발자</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>개발자</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Busan
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover2.png');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>
