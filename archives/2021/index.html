
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="이상권의 개발노트">
    <title>Archives: 2021 - 이상권의 개발노트</title>
    <meta name="author" content="이상권">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="이상권의 개발노트">
<meta property="og:url" content="https://earth-kor.github.io/archives/2021/index.html">
<meta property="og:site_name" content="이상권의 개발노트">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="이상권">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://earth-kor.github.io/assets/images/profile.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            이상권의 개발노트
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">이상권</h4>
                
                    <h5 class="sidebar-profile-bio"><p>미래의 백엔드 개발자</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/index"
                            
                            rel="noopener"
                            title="홈"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">홈</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="카테고리"
                        >
                        <i class="sidebar-button-icon fa fa-code" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">카테고리</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="태그"
                        >
                        <i class="sidebar-button-icon fa fa-tag" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="기록"
                        >
                        <i class="sidebar-button-icon fa fa-running" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">기록</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/Earth-KOR"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.instagram.com/kwon_27_/?hl=ko"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="instagram"
                        >
                        <i class="sidebar-button-icon fab fa-instagram" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">instagram</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="mailto:lsk941017@naver.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/04/04/Comparable%20&%20Comparator/"
                            aria-label=": Comparable &amp; Comparator"
                        >
                            Comparable &amp; Comparator
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-04-04T11:26:58-07:00">
	
		    Apr 04, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%EC%9D%B4%EB%A1%A0%EB%85%B8%ED%8A%B8/">이론노트</a>, <a class="category-link" href="/categories/%EC%9D%B4%EB%A1%A0%EB%85%B8%ED%8A%B8/Java/">Java</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Comparable-amp-Comparator"><a href="#Comparable-amp-Comparator" class="headerlink" title="Comparable &amp; Comparator"></a>Comparable &amp; Comparator</h1><h2 id="Comparable"><a href="#Comparable" class="headerlink" title="Comparable"></a>Comparable</h2><p>단순 데이터가 아닌 객체를 정렬하고 싶을 때에는 해당 class에 Comparable 인터페이스를 구현하도록 한다. 그리고 compareTo 메서드를 오버라이딩 하여 재정의 한다</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">    class Friend implements Comparable&lt;Friend&gt;&#123;</span><br><span class="line">        private String name;</span><br><span class="line">        private int age;</span><br><span class="line">        </span><br><span class="line">        public Friend(String name, int age) &#123;</span><br><span class="line">            super();</span><br><span class="line">            this.name &#x3D; name;</span><br><span class="line">            this.age &#x3D; age;</span><br><span class="line">        &#125;        </span><br><span class="line">        @Override</span><br><span class="line">        public int compareTo(Friend o) &#123;</span><br><span class="line">            return this.age - o.age;</span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>이 메서드가 바로 정렬 규칙을 정하는 메서드입니다.<br>compareTo() 메서드는 그것이 구현된 객체와 매개변수로 넘어 온 타겟 객체를 비교하며, 원하는 정렬에 따른 int 값을 반환해야 합니다.<br>기준을 정한 후, 이 객체가 매개변수의 객체보다 작으면 음수, 같으면 0, 크면 양수를 반환하면 됩니다.</p>
<p>Friend 객체목록을 List로 다루는 경우에는 어떻게 정렬할 수 있을까요?<br>List의 경우에는 Arrays클래스가 아닌 Collections클래스의 sort() 메서드를 사용하여 정렬하며, 방법은 같습니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> @Test</span><br><span class="line">    public void test_SortListWithComparable() throws Exception &#123;</span><br><span class="line">        Friend kim &#x3D; new Friend(&quot;Kim&quot;, 36);</span><br><span class="line">        Friend park &#x3D; new Friend(&quot;Park&quot;, 20);</span><br><span class="line">        Friend lee &#x3D; new Friend(&quot;Lee&quot;, 28);</span><br><span class="line">        Friend yong &#x3D; new Friend(&quot;Yong&quot;, 18);</span><br><span class="line">        </span><br><span class="line">        List&lt;Friend&gt; friends &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">        friends.add(kim);</span><br><span class="line">        friends.add(park);</span><br><span class="line">        friends.add(lee);</span><br><span class="line">        friends.add(yong);</span><br><span class="line">        </span><br><span class="line">        Collections.sort(friends);</span><br><span class="line">        </span><br><span class="line">        assertEquals(yong, friends.get(0));</span><br><span class="line">        assertEquals(park, friends.get(1));</span><br><span class="line">        assertEquals(lee, friends.get(2));</span><br><span class="line">        assertEquals(kim, friends.get(3));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="Comparator"><a href="#Comparator" class="headerlink" title="# Comparator"></a># Comparator</h1><p>그렇다면 그 기본규칙 외에 다른 규칙으로 정렬하고 싶다면 어떻게 할 수 있을까요?<br>여기서 등장하는 인터페이스가 바로 Comparator 인터페이스 입니다.<br>Friend 목록을 기본규칙인 ‘나이(age)’ 순 정렬이 아닌, ‘이름(name)’ 순서로 정렬하고자 합니다.<br>먼저, 별도의 규칙을 가진 클래스를 생성합니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class SortFriendByNameInAsc implements Comparator&lt;Friend&gt;&#123;</span><br><span class="line">        @Override</span><br><span class="line">        public int compare(Friend o1, Friend o2) &#123;</span><br><span class="line">            return o2.name.compareTo(o1.name);</span><br><span class="line">        &#125;        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Comparator 인터페이스를 구현하는 경우 compare() 메서드를 구현해서 규칙을 정해야 합니다.<br>Comparable의 compareTo() 메서드와 다르게 매개변수를 두 개 받습니다.<br>Comparator는 비교대상 객체 외부에 생성하므로 비교할 대상 두 개에 대한 정보를 모두 매개변수로 받는 것입니다.<br>Collections.sort() 메서드에 정렬대상이 되는 List와 Comparator를 구현한 규칙 객체를 매개변수로 보내 사용하면 됩니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  @Test</span><br><span class="line">    public void test_SortListWithComparator() throws Exception &#123;</span><br><span class="line">        Friend kim &#x3D; new Friend(&quot;Kim&quot;, 36);</span><br><span class="line">        Friend park &#x3D; new Friend(&quot;Park&quot;, 20);</span><br><span class="line">        Friend lee &#x3D; new Friend(&quot;Lee&quot;, 28);</span><br><span class="line">        Friend yong &#x3D; new Friend(&quot;Yong&quot;, 18);</span><br><span class="line">        </span><br><span class="line">        List&lt;Friend&gt; friends &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">        friends.add(kim);</span><br><span class="line">        friends.add(park);</span><br><span class="line">        friends.add(lee);</span><br><span class="line">        friends.add(yong);</span><br><span class="line">        </span><br><span class="line">        Collections.sort(friends, new SortFriendByNameInAsc());</span><br><span class="line">        </span><br><span class="line">        assertEquals(kim, friends.get(0));</span><br><span class="line">        assertEquals(lee, friends.get(1));</span><br><span class="line">        assertEquals(park, friends.get(2));</span><br><span class="line">        assertEquals(yong, friends.get(3));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Comparable - 이 인터페이스를 구현한 객체 스스로에게 부여하는 한 가지 기본 정렬 규칙을 설정하는 목적으로 사용한다.<br>Comparator - 이 인터페이스를 구현한 클래스는 정렬 규칙 그 자체를 의미하며, 기본 정렬 규칙과 다르게 원하는대로 정렬순서를 지정하고 싶을 때 사용한다.</p>
<p>출처: <a target="_blank" rel="noopener" href="https://dev-daddy.tistory.com/23">https://dev-daddy.tistory.com/23</a> [대한민국 개발자 아빠]</p>
<h2 id="자바8-람다를-이용한-정렬-Comparator-comparing"><a href="#자바8-람다를-이용한-정렬-Comparator-comparing" class="headerlink" title="자바8 람다를 이용한 정렬 ( Comparator.comparing)"></a>자바8 람다를 이용한 정렬 ( Comparator.comparing)</h2><pre><code>// 무게 오름차순 정렬
    inventory.sort(Comparator.comparing(Apple::getWeight));

    // 무게 내림차순 정렬
    inventory.sort(Comparator.comparing(Apple::getWeight).reversed());

    // 무게 오름차순 정렬 (무게가 같으면 색 오름차순 정렬)
    inventory.sort(Comparator.comparing(Apple::getWeight).thenComparing(Apple::getColor));

    // 무게 오름차순 정렬 (무게가 같으면 색 내림차순 정렬)
    Comparator&lt;Apple&gt; reversedColorComparator = Comparator.comparing(Apple::getColor).reversed();
    inventory.sort(Comparator.comparing(Apple::getWeight).thenComparing(reversedColorComparator));</code></pre>
<p>출처: <a target="_blank" rel="noopener" href="https://broduck.tistory.com/6">https://broduck.tistory.com/6</a> [개발로 하는 개발]</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/04/04/Comparable%20&%20Comparator/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/04/04/String%20vs%20string/"
                            aria-label=": Comparable &amp; Comparator"
                        >
                            Comparable &amp; Comparator
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-04-04T11:26:58-07:00">
	
		    Apr 04, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%EC%9D%B4%EB%A1%A0%EB%85%B8%ED%8A%B8/">이론노트</a>, <a class="category-link" href="/categories/%EC%9D%B4%EB%A1%A0%EB%85%B8%ED%8A%B8/Java/">Java</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="String-vs-string"><a href="#String-vs-string" class="headerlink" title="String vs string"></a>String vs string</h1><p>[원시 타입 vs 참조 타입]</p>
<p>원시 타입과 참조 타입의 기능적 차이는 크게 2가지가 있습니다.</p>
<h2 id="1-Null을-담을-수-있는가"><a href="#1-Null을-담을-수-있는가" class="headerlink" title="1. Null을 담을 수 있는가?"></a>1. Null을 담을 수 있는가?</h2><p>원시 타입은 null을 담을 수 없습니다. 반면에 참조 타입은 null을 입력값으로 받을 수 있습니다.</p>
<p>int i = null;//불가능<br>Integer integer = null; //가능</p>
<h2 id="2-제네릭-타입에서-사용할-수-있는가"><a href="#2-제네릭-타입에서-사용할-수-있는가" class="headerlink" title="2. 제네릭 타입에서 사용할 수 있는가?"></a>2. 제네릭 타입에서 사용할 수 있는가?</h2><p>원시 타입은 제네릭 타입에서 사용할 수 없습니다. 반면에 참조 타입은 제네릭 타입에서 사용할 수 있습니다.</p>
<p>List<int> i;//불가능<br>List<Integer> integer;//가능
 </p>
<h2 id="그럼-원시-타입의-장점은-뭐지"><a href="#그럼-원시-타입의-장점은-뭐지" class="headerlink" title="그럼 원시 타입의 장점은 뭐지?"></a>그럼 원시 타입의 장점은 뭐지?</h2><p>원시 타입은 null을 다루지도 못하고, 제네릭에 담기지도 못합니다. 그러면 원시타입은 언제 사용해야 할까요? 원시 타입이 참조 타입과 비교해서 갖는 장점은 ‘성능’상의 이점이 있습니다.</p>
<ol>
<li>접근 속도<br>원시 타입은 ‘스택’ 메모리에 값이 존재합니다. 반면에 참조 타입은 하나의 인스턴스이기 때문에 ‘스택’메모리에는 참조값만 있고, 실제 값은 힙 메모리에 존재하게 됩니다. 그리고 값을 필요로 할 때마다 언박싱 과정을 거쳐야 하니 원시 타입과 비교해서 접근 속도가 느려지게 됩니다. (예외적으로 엄청 큰 숫자를 복사해야 한다면, 참조값만 넘길 수 있는 참조 타입이 좋을 수 도 있습니다.)</li>
</ol>
<h2 id="결론"><a href="#결론" class="headerlink" title="결론"></a>결론</h2><p>성능과 메모리에 장점이 있는 원시 타입을 먼저 고려해봅니다. 만약 Null을 다뤄야 하거나, 제네릭 타입에서 사용되어야 한다면 참조 타입을 사용합니다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/04/04/String%20vs%20string/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/04/04/javascript%20%EB%B0%B0%EC%97%B4%EC%97%90%20%EB%8C%80%ED%95%9C%20%EB%8B%A4%EC%96%91%ED%95%9C%20%EB%A9%94%EC%84%9C%EB%93%9C%20%EC%A0%95%EB%A6%AC/"
                            aria-label=": javascript 배열에 대한 다양한 메서드 정리"
                        >
                            javascript 배열에 대한 다양한 메서드 정리
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-04-04T11:17:48-07:00">
	
		    Apr 04, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%EC%9D%B4%EB%A1%A0%EB%85%B8%ED%8A%B8/">이론노트</a>, <a class="category-link" href="/categories/%EC%9D%B4%EB%A1%A0%EB%85%B8%ED%8A%B8/Javascript/">Javascript</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="javascript-배열에-대한-다양한-메서드-정리"><a href="#javascript-배열에-대한-다양한-메서드-정리" class="headerlink" title="javascript 배열에 대한 다양한 메서드 정리"></a>javascript 배열에 대한 다양한 메서드 정리</h1><h2 id="1-forEach"><a href="#1-forEach" class="headerlink" title="1. forEach"></a>1. forEach</h2><p>arr.forEach( function (n) { if ( n % 2 == 0 ) { console.log(n); } );</p>
<p>( Vs for반복문 )</p>
<p>스코프를 더럽히지 않는다.</p>
<ul>
<li>for 구문은 배열의 인덱스를 저장하기 위한 임시 변수 i를 할당했습니다. 사실 이 프로그램은 아주 작아서 임시 변수 할당하는 것은 큰 문제가 안됩니다. 그러나 시스템이 커지고 유지보수를 해야 한다면 언제 사용한지 모르는 i 때문에 가독성이 떨어지게 됩니다.<br>요소 접근 방법 arr[i] vs n</li>
<li>forEach의 콜백 함수의 첫 번째 인자로 각 요소의 값이 들어옵니다. 덕분에 우리는 깔끔한 방법으로 각 요소의 값을 얻을 수 있습니다.</li>
</ul>
<h2 id="2-map"><a href="#2-map" class="headerlink" title="2. map"></a>2. map</h2><p>arr.map(function (str) { return str.length; });</p>
<p>( Vs forEach 반복문 )</p>
<p>map은 부모 스코프 영역을 건드리지 않고 콜백 함수만으로 목적을 달성합니다. 다른 코드는 신경쓰지 않아도 됩니다.<br>소개 할 메소드는 함수형 프로그래밍 패러다임에서 아이디어를 착안합니다. 함수형 프로그래밍 패러다임은 순수 함수의 연결로부터 도메인을 해결하는 방법입니다. 순수 함수는 사이드 이펙트를 가지지않는 함수를 말합니다. Input과 Output이 중요할 뿐이지 내부 로직은 다른 영역에 간섭하지 않기 때문에 추적하기 쉽고 간결한 구조가 자연스럽게 형성됩니다.<br>for, forEach 또는 다른 메소드로도 서로의 도메인을 해결할 수 있겠지만, 각 목적에 따라서 사용함으로써 직관적이고 가독성있는 코드를 작성하는데 도움 줄 것입니다.</p>
<h2 id="3-filter"><a href="#3-filter" class="headerlink" title="3. .filter"></a>3. .filter</h2><p>Javascript - filter 패턴 1</p>
<p>Let result = data.filter( x =&gt; { return x.age &gt;= 20 }</p>
<p>Javascript - filter 패턴 2</p>
<p>Let result = data.filter( (x, idx, array) =&gt; { return idx ===0 &amp;&amp; x.age &gt;= 20 });</p>
<p>해당하는 값이 없을 시 빈배열 반환함!</p>
<h2 id="4-find"><a href="#4-find" class="headerlink" title="4. .find"></a>4. .find</h2><p>arr.find( function (n) { return n % 5 == 0 ; ) );</p>
<p>filter는 찾지 못하면 빈 배열을 반환했습니다. 그런데 find는 undefined라고요? 그러면 함수를 연결하여 사용할 수 없는 거 아닌가요? 조금만 생각해보면 find는 빈 배열을 반환할 필요가 없음을 알 수 있습니다. 정상적으로 반환하더라도 이미 배열이 아니기 떄문입니다. 따라서 find의 반환은 항상 배열이 아니기 때문에 어차피 다른 Array 메소드와 연결하여 사용할 일이 없습니다.</p>
<ol start="5">
<li>Reduce</li>
</ol>
<p>reduce 메소드는 위에서 나온 메소드를 모두 대체할 수 있는 아주 유연한 메소드입니다. map, filter, find로 구현할 수 있는 문제라면 reduce로도 구현할 수 있습니다. 하지만 상황에 따라 적절한 메소드를 사용하는 것이 가독성 측면에서 더 유리하겠죠?<br>먼저 reduce의 사용 방법을 봅시다. 조금 특이합니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x2F;&#x2F; 배열 요소의 합 계산하기</span><br><span class="line">var arr &#x3D; [9, 2, 8, 5, 7];</span><br><span class="line">var sum &#x3D; arr.reduce(function (pre, value) &#123;</span><br><span class="line">   count++;</span><br><span class="line">    return pre + value;</span><br><span class="line">&#125;);</span><br><span class="line">console.log(count); &#x2F;&#x2F; 4</span><br><span class="line">console.log(sum); &#x2F;&#x2F; 31</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 배열 요소의 합 계산하기</span><br><span class="line">var arr &#x3D; [9, 2, 8, 5, 7];</span><br><span class="line">var count &#x3D; 0;</span><br><span class="line">var sum &#x3D; arr.reduce(function (pre, value) &#123;</span><br><span class="line">    count++;</span><br><span class="line">    return pre + value;</span><br><span class="line">&#125;, 0); &#x2F;&#x2F; initialValue가 주어졌다!</span><br><span class="line">console.log(sum); &#x2F;&#x2F; 31</span><br><span class="line">console.log(count); &#x2F;&#x2F; 5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="6-indexOf-lastIndexOf"><a href="#6-indexOf-lastIndexOf" class="headerlink" title="6. indexOf() , lastIndexOf()"></a>6. indexOf() , lastIndexOf()</h2><p> indexOf() 함수는 <br>배열 안에서 찾으려는 값(searchElement)과 정확하게 일치(===)하는’첫번째’ element의 index를 리턴합니다. <br>  lastIndexOf() 함수는 <br>배열 안에서 찾으려는 값(searchElement)과 정확하게 일치(===)하는 ‘마지막’ element의 index 를 리턴합니다.<br> <br>두 함수 모두 찾으려는 값이 배열에 없으면 -1을 리턴합니다.</p>
<h2 id="7-Includes"><a href="#7-Includes" class="headerlink" title="7. Includes"></a>7. Includes</h2><p>arr.includes(1); // true<br>arr[0]의 값이 1이므로 true를 리턴합니다.<br> arr.includes(3); // false<br>arr에는 3이라는 값이 없으므로 false를 리턴합니다.<br> arr.includes(1, 1); // false<br>arr[1] 이후에는 1이라는 값이 없으므로 false를 리턴합니다.<br> arr.includes(1, 2); // false<br>두 번째 파라미터인 fromIndex에 배열의 길이보다 크거나 같은 값이 들어가면 무조건 false를 리턴합니다.<br>여기서 배열의 길이는 2인데, fromIndex 자리에 2가 들어갔으므로 false가 리턴되었습니다.<br> arr.includes(2, -1); // true<br>fromIndex 자리에 음수가 들어가면, 실제 시작 index는 ‘배열의 길이 + fromIndex’로 계산됩니다.<br>배열의 길이는 2이고, fromIndex는 -1이므로, <br>실제 검색을 시작하는 index는 1이 됩니다.  (2 + (-1))<br>arr[1]에 2가 있으므로, true가 리턴 되었습니다.</p>
<p>includes() 함수는 내부적으로 값을 비교할 때 ‘===’ 연산자를 사용하기 때문입니다.<br>‘===’ 연산자는 primitive type이 아닌 object를 비교할 때,<br>object의 값이 같은지 비교하는 것이 아니라, 같은 객체를 가리키고 있는지를 비교합니다.</p>
<h2 id="8-Some"><a href="#8-Some" class="headerlink" title="8. Some"></a>8. Some</h2><p>배열에서 값을 찾는 조건을 callback 함수로 전달하고,<br>배열에 조건에 맞는 값이 있는지 여부(boolean)를 리턴하는 하는 함수입니다.<br>조건에 맞는 값이 있으면 true, 조건에 맞는 값이 없으면 false를 리턴합니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">const arr1 &#x3D; [1, 2, 3, 2];</span><br><span class="line">const arr2 &#x3D; [1, 3, 4, 5];</span><br><span class="line"></span><br><span class="line">function findNumberTwo(element) &#123;</span><br><span class="line">  if(element &#x3D;&#x3D;&#x3D; 2) &#123;</span><br><span class="line">    return true;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">document.writeln(arr1.some(findNumberTwo)); &#x2F;&#x2F; true</span><br><span class="line">document.writeln(arr2.some(findNumberTwo)); &#x2F;&#x2F;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>object의 값을 체크할 때는 some() 함수를 사용합니다.</p>
<p>includes() 함수는 primitive type을 체크하는 적절하고,<br>some() 함수는 primitive type 외의 타입을 체크하는데 적절하고,<br>체크 로직을 다양하게 적용할 수 있는 장점이 있습니다.</p>
<p>출처: <a target="_blank" rel="noopener" href="https://hianna.tistory.com/403">https://hianna.tistory.com/403</a> [어제 오늘 내일]</p>
<p>출처 : <a target="_blank" rel="noopener" href="https://bblog.tistory.com/300">https://bblog.tistory.com/300</a></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/04/04/javascript%20%EB%B0%B0%EC%97%B4%EC%97%90%20%EB%8C%80%ED%95%9C%20%EB%8B%A4%EC%96%91%ED%95%9C%20%EB%A9%94%EC%84%9C%EB%93%9C%20%EC%A0%95%EB%A6%AC/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/03/27/Data%20formatting/"
                            aria-label=": Data formatting"
                        >
                            Data formatting
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-03-27T11:44:09-07:00">
	
		    Mar 27, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%EA%B0%9C%EB%B0%9C%EB%85%B8%ED%8A%B8/">개발노트</a>, <a class="category-link" href="/categories/%EA%B0%9C%EB%B0%9C%EB%85%B8%ED%8A%B8/Spring/">Spring</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="데이터를-formatting-하는-방법"><a href="#데이터를-formatting-하는-방법" class="headerlink" title="데이터를 formatting 하는 방법"></a>데이터를 formatting 하는 방법</h1><p>기본적으로 프론트에 reture 하는 값은 Entity 자체를 그대로 리턴하면 안된다.<br>따라서 필요한 데이터만 return 해주기 위해서 새로운 reture DTO를 만들고 보내줘야하는데<br>모든 값들을 해당 DTO로 하나씩 손으로 넣어 주려면 시간이 많이 걸린다.<br>이런 문제를 대비해서 깔끔하게 만들 수 있는 방법은 다음과 같다.</p>
<ol>
<li>Convert</li>
</ol>
<p>1)) 처음에는 @Mapper 가 등록된 하나의 interface를 만들어야 한다.</p>
<p>@Mapper(componentModel = “spring”, unmappedTargetPolicy = ReportingPolicy.IGNORE, imports = {CarManualCarCode.class, Collectors.class})<br>public interface CarManualMapper<br>{<br>}</p>
<p>2)) 들어오는 객체와 바꿀 객체를 정하고 메서드를 만들어 준다.</p>
<p>CarInstallManual convert(CarRequestManualDTO source);</p>
<p>3)) 이렇게만 선언하면 모든 걸 다 바꾸기 때문에 무시할건 무시하고 이름이 맞지 않는건 우리가 커스터마이징이 가능하다.</p>
<p>@Mapping(source = “locationOfFuseBoxType”, target = “locationOfFuseBox”)</p>
<ul>
<li>컬럼명이 다를때</li>
</ul>
<p>@Mapping(target = “carManualCarCodes”, ignore = true)</p>
<ul>
<li>변경하지않을 컬럼을 지정할때</li>
</ul>
<p>@Mapping(expression = “java(source.getCarManualCarCodes().stream().map(CarManualCarCode::getModelCode).collect(Collectors.toList()))”, target = “modelCodes”)</p>
<ul>
<li>Spring이 만든 코드를 쓰지않고 내가 직접 만들고싶을때</li>
</ul>
<p>4)) 이대로 bulid를 하면 자동으로 SetGet코드를 만들어 준다.</p>
<ol start="2">
<li>생성자</li>
</ol>
<p>1)) 하나의 DTO를 만들고 바꾸고 싶은것만 지정해서 생성자를 만들어준다</p>
<p>@AllArgsConstructor<br>@NoArgsConstructor<br>@Data<br>public class CarManualListDTO implements Serializable<br>{</p>
<pre><code>private Long id;
private String pathOfDiagramImage;
private ManualImage manualImage1;
private ManualImage manualImage2;
private String modelSubName;
private String releasedYear;
private FuseType fuseType;
private String manufacturer;
private String note;
private LocationOfFuseBoxType locationOfFuseBoxType;
private NumberOfFuseBoxType numberOfFuseBoxType;
private Boolean isDeleted;
private LocalDateTime lastDeletedDateTime;
private LocalDateTime createdAt;
private List&lt;CarManualCarCode&gt; ModelCodes;
private String pathOfNoteImage;

public CarManualListDTO(CarInstallManual carInstallManual)
&#123;
    this.id = carInstallManual.getId();
    this.pathOfDiagramImage = carInstallManual.getPathOfDiagramImage();
    this.manualImage1 = carInstallManual.getManualImage_1();
    this.manualImage2 = carInstallManual.getManualImage_2();
    this.modelSubName = carInstallManual.getModelSubName();
    this.releasedYear = carInstallManual.getReleasedYear();
    this.fuseType = carInstallManual.getFuseType();
    this.manufacturer = carInstallManual.getManufacturer();
    this.note = carInstallManual.getNote();
    this.locationOfFuseBoxType = carInstallManual.getLocationOfFuseBox();
    this.numberOfFuseBoxType = carInstallManual.getNumberOfFuseBox();
    this.isDeleted = carInstallManual.getIsDeleted();
    this.lastDeletedDateTime = carInstallManual.getLastDeletedDateTime();
    this.createdAt = carInstallManual.getCreatedAt();
    this.pathOfNoteImage = carInstallManual.getPathOfNoteImage();
    this.ModelCodes = checkIsDeletedCarCode(carInstallManual.getCarManualCarCodes());
&#125;</code></pre>
<p>2)) 생성자를 넣을 때 조건문을 넣고 싶다면 하나의 새로운 메서드를 생성하고 거기다가 조건을 적어주면 된다!</p>
<p>private List<CarManualCarCode> checkIsDeletedCarCode(List<CarManualCarCode> carCodes)<br>{<br>    return carCodes.stream().filter((i) -&gt; i.getIsDeleted() == false).collect(Collectors.toList());<br>}<br>}</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/03/27/Data%20formatting/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/03/27/Dirty%20checking/"
                            aria-label=": Dirty checking"
                        >
                            Dirty checking
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-03-27T11:44:09-07:00">
	
		    Mar 27, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%EC%9D%B4%EB%A1%A0%EB%85%B8%ED%8A%B8/">이론노트</a>, <a class="category-link" href="/categories/%EC%9D%B4%EB%A1%A0%EB%85%B8%ED%8A%B8/Spring/">Spring</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Dirty-checking"><a href="#Dirty-checking" class="headerlink" title="Dirty checking"></a>Dirty checking</h1><p>Dirty란 상태의 변화가 생긴 정도<br>Dirty Checking이란 상태 변경 검사</p>
<p>JPA에서는 트랜잭션이 끝나는 시점에 변화가 있는 모든 엔티티 객체를 데이터 베이스에 자동으로 반영해준 다.</p>
<p>이떄 변화가 있다의 기준은 최초 조회 상태입니다.</p>
<p>당연히 이런 상태 변경 검사의 대상은 영속성 컨텍스트가 관리하는 엔티티에만적용 됩니다.</p>
<ul>
<li>detach된 엔티티 (준영속)</li>
<li>DB에 반영되기 전 처음 생성된 엔티티 (비영속)<br>등 준영속/비영속 상태의 엔티티는 Dirty Checking 대상에 포함되지 않습니다.즉, 값을 변경해도 데이터베이스에 반영되지 않는다는 것이죠.</li>
</ul>
<h2 id="변경-부분만-update하고-싶을-땐"><a href="#변경-부분만-update하고-싶을-땐" class="headerlink" title="변경 부분만 update하고 싶을 땐?"></a>변경 부분만 update하고 싶을 땐?</h2><p>JPA에서는 전체 필드를 업데이트하는 방식을 기본값으로 사용합니다.전체 필드를 업데이트하는 방식의 장점은 다음과 같습니다.</p>
<ul>
<li>생성되는 쿼리가 같아 부트 실행시점에 미리 만들어서 재사용가능합니다.</li>
<li>데이터베이스 입장에서 쿼리 재사용이 가능하다<ul>
<li>동일한 쿼리를 받으면 이전에 파싱된 쿼리를 재사용한다.</li>
</ul>
</li>
</ul>
<p>그래서 이런 경우엔 @DynamicUpdate로 변경 필드만 반영되도록 할 수 있습니다.<br>엔티티 최상단에 아래와 같이 @DynamicUpdate 를 선언해주시면 됩니다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/03/27/Dirty%20checking/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/03/27/Fetch%20Join/"
                            aria-label=": Fetch Join"
                        >
                            Fetch Join
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-03-27T11:44:09-07:00">
	
		    Mar 27, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%EC%9D%B4%EB%A1%A0%EB%85%B8%ED%8A%B8/">이론노트</a>, <a class="category-link" href="/categories/%EC%9D%B4%EB%A1%A0%EB%85%B8%ED%8A%B8/JPA/">JPA</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Fetch-Join"><a href="#Fetch-Join" class="headerlink" title="Fetch Join"></a>Fetch Join</h1><p>두개의 엔티티는 회원과 팀을 나타내고 있으면서 N : 1 양방향 매핑으로 동작하고 있다. 연관관계의 주인은 N쪽인 회원 엔티티로 선정하였고 FetchType.Lazy를 통해 조회과정에서 지연로딩 전략을 선택하였다고 하자.</p>
<p>// JPQL<br>select m from Memeber m join fetch m.team</p>
<p>// 실제 데이터베이스에 전송되는 SQL<br>SELECT M.<em>, T.</em> FROM MEMBER M INNER JOIN TEAM T ON M.TEAM_ID = T.ID</p>
<p>JPQL에서 join fetch 를 사용하면 실제 SQL에서는 두 테이블을 조인한 테이블을 조회할 수 있다. 데이터베이스로 전송되는 실제 SQL을 자세히 보면 FetchType.EAGER를 사용한 즉시로딩 전략으로 조회한 것 SQL이 같다는 것을 알 수 있다.<br>(엔티티에서 지연로딩 전략으로 세팅을 해도 JPQL에서 페치조인으로 날리는 것이 우선순위)<br> <br>즉시로딩 전략은 묵시적인 방식이라서 원하지 않는 타이밍에도 항상 연관필드를 조인을 하고 결과를 반환한다. 물론 조인을 하고나서 데이터를 처리하는 것이 훨씬 효율적인 구성이 있을텐데 그때 바로 JPQL 페치조인을 사용하는 것이다. JPQL 페치조인은 명시적으로 동적인 타이밍에 원하는 객체그래프를 탐색할 수 있어 유용하다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/03/27/Fetch%20Join/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/03/27/Lazy%20vs%20Eager/"
                            aria-label=": Lazy vs Eager"
                        >
                            Lazy vs Eager
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-03-27T11:44:09-07:00">
	
		    Mar 27, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%EC%9D%B4%EB%A1%A0%EB%85%B8%ED%8A%B8/">이론노트</a>, <a class="category-link" href="/categories/%EC%9D%B4%EB%A1%A0%EB%85%B8%ED%8A%B8/Spring/">Spring</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="LAZY-EAGER"><a href="#LAZY-EAGER" class="headerlink" title="LAZY , EAGER"></a>LAZY , EAGER</h1><p>@ManyToOne  or  @OneToMany 형태로 설계되어 있다면 다음과 같은 형태로 데이터를 가져올 수 있다.</p>
<ol>
<li>지연로딩 (LAZY)</li>
</ol>
<ul>
<li>로딩되는 시점에 Lazy 로딩 설정이 되어있는 Team 엔티티는 프록시 객체로 가져온다</li>
<li>후에 실제 객체를 사용하는 시점에 초기화가 된다. 이때 DB에 쿼리가 나간다</li>
<li>이런 경우 SELECT 쿼리가 따로따로 2번 나간다.</li>
<li>만약, 바로 두 테이블의 데이터가 필요하다면 EAGER를 사용하면 된다.</li>
</ul>
<ol start="2">
<li>즉시로딩 (EAGER)</li>
</ol>
<ul>
<li>대부분의 JPA 구현체는 가능하면 조인을 사용하서 SQL 한번에 조회하려고 한다.</li>
<li>이렇게 하면 실제 조회 할 떄 한방 쿼리로 다 조회 해온다.</li>
<li>이때는 프록시 객체가 아니라 실제 객체를 가져온다.</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/03/27/Lazy%20vs%20Eager/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/03/27/%EC%98%81%EC%86%8D%EC%84%B1%20%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8/"
                            aria-label=": 영속성 컨텍스트"
                        >
                            영속성 컨텍스트
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-03-27T11:44:09-07:00">
	
		    Mar 27, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%EA%B0%9C%EB%B0%9C%EB%85%B8%ED%8A%B8/">개발노트</a>, <a class="category-link" href="/categories/%EA%B0%9C%EB%B0%9C%EB%85%B8%ED%8A%B8/Spring/">Spring</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="영속성-컨텍스트"><a href="#영속성-컨텍스트" class="headerlink" title="영속성 컨텍스트"></a>영속성 컨텍스트</h1><p>엔티티 매니저를 통해 엔티티를 저장하거나 조회하면 엔티티 매니저는 영속성 컨텍스트에 엔티티를 보관하고 관리한다. </p>
<p>entityManager.persist ( [entityName] )</p>
<ul>
<li>엔티티 매니저를 사용해 회원 엔티티를 영속성 컨텍스트에 저장 한다는 의미</li>
</ul>
<h2 id="영속성-컨텍스트의-특징"><a href="#영속성-컨텍스트의-특징" class="headerlink" title="영속성 컨텍스트의 특징"></a>영속성 컨텍스트의 특징</h2><ol>
<li>엔티티 매니저를 생성 할 때 하나 만들어진다.</li>
<li>엔티티 매니저를 통해서 영속성 컨텍스트에 접근하고 관리 할 수 있다.</li>
</ol>
<h2 id="엔티티의-생명주기"><a href="#엔티티의-생명주기" class="headerlink" title="엔티티의 생명주기"></a>엔티티의 생명주기</h2><ol>
<li>비영속 : 영속성 컨텍스트와 전혀 관계가 없는 상태</li>
<li>영속. : 영속성 컨텍스트에 저장된 상태</li>
<li>준영속 : 영속성 컨텍스트에 저장되었다고 분리된 상태</li>
<li>삭제 : 삭제된 상태</li>
</ol>
<h2 id="영속성-컨텍스트의-특징-1"><a href="#영속성-컨텍스트의-특징-1" class="headerlink" title="영속성 컨텍스트의 특징"></a>영속성 컨텍스트의 특징</h2><ol>
<li>영속성 컨텍스트의 식별자 값</li>
</ol>
<ul>
<li>영속성 컨텍스트는 엔티티를 식별자 값으로 구분한다. 따라서 영속 상태는 식별자 값이 반드시 있어야 한다.</li>
</ul>
<ol start="2">
<li>영속성 컨텍스트와 데이터베이스 저장</li>
</ol>
<ul>
<li>JPA는 보통 트랜잭션을 커밋하는 순간 영속성 컨텍스트에 새로 저장된 엔티티를 데이터 베이스에 반영하는데 이를 flush 라고 한다.</li>
</ul>
<h2 id="영속성-컨텍스트가-엔티티를-관리하는-다음과-같은-장점이-있다"><a href="#영속성-컨텍스트가-엔티티를-관리하는-다음과-같은-장점이-있다" class="headerlink" title="영속성 컨텍스트가 엔티티를 관리하는 다음과 같은 장점이 있다."></a>영속성 컨텍스트가 엔티티를 관리하는 다음과 같은 장점이 있다.</h2><ol>
<li>1차 캐시</li>
</ol>
<ul>
<li>영속성 컨텍스트  내부에는 캐시가 있는데 이를 1차 캐시라고 한다. 영속 상태의 엔티티를 이곳에 저장한다. 1차 캐시의 키는 식별자 값이고 값은 엔티티 인스터스이다.</li>
</ul>
<ol start="2">
<li>동일성 보장</li>
</ol>
<ul>
<li>영속성 컨텍스트는 엔티티의 동일성을 보장한다.</li>
</ul>
<p>Member a = em.find(Member.class, “member1”);<br>Member b = em.find(Member.class, “member1”);<br>System.out.print(a==b) // true</p>
<p>실제 인스턴스는 다를 수 있지만 인스턴스가 가지고 있는 값은 같다.</p>
<ol start="3">
<li>트랙잭션을 지원하는 쓰기 지연</li>
</ol>
<p>엔티티 매니저는 트랜잭션을 커밋하기 직전까지 내부 쿼리 저장소에 INSERT SQL을 모아둔다. 그리고 트랜잭션을 커밋할 때 모아둔 쿼리를 DB에 보낸다. 이것을 트랜잭션을 지원하는 쓰기 지연이라 한다.</p>
<h2 id="변경감지"><a href="#변경감지" class="headerlink" title="변경감지"></a>변경감지</h2><ol>
<li><p>트랙잭션을 커밋하면 엔티티 매니저 내부에서 먼저 플러시가 호출된다.</p>
</li>
<li><p>엔티티와 스냅샷을 비교하여 변경된 엔티티를 찾는다.</p>
</li>
<li><p>변경된 엔티티가 있으면 수정 쿼리를 생성해서 쓰기 지연 SQL 저장소에 저장한다.</p>
</li>
<li><p>쓰기 지연 저장소의 SQL을 플러시한다.</p>
</li>
<li><p>데이터베이스 트랜잭션을 커밋한다.</p>
</li>
</ol>
<h2 id="플러시"><a href="#플러시" class="headerlink" title="플러시"></a>플러시</h2><p>플러시는 영속성 컨텍스트의 변경 내용을 데이터베이스에 반영한다. 영속성 컨텍스트의 엔티티를 지우는게 아니라 변경 내용을 데이터베이스에 동기화하는 것이다.</p>
<p>플러시의 흐름</p>
<ol>
<li>변경 감지가 동작해서 스냅샷과 비교해서 수정된 엔티티를 찾는다.</li>
<li>수정된 엔티티에 대해서 수정 쿼리를 만들거 SQL 저장소에 등록한다.</li>
<li>쓰기 지연 SQL 저장소의 쿼리를 데이터베이스에 전송한다.</li>
</ol>
<p>플러시하는 방법<br>1. em.flush()2. 트랙잭션 커밋시 자동 호출3. JPQL 쿼리 실행시 자동 호출</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/03/27/%EC%98%81%EC%86%8D%EC%84%B1%20%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/03/27/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B0/"
                            aria-label=": 순환참조"
                        >
                            순환참조
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-03-27T11:44:09-07:00">
	
		    Mar 27, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%EA%B0%9C%EB%B0%9C%EB%85%B8%ED%8A%B8/">개발노트</a>, <a class="category-link" href="/categories/%EA%B0%9C%EB%B0%9C%EB%85%B8%ED%8A%B8/Spring/">Spring</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="순환참조"><a href="#순환참조" class="headerlink" title="순환참조"></a>순환참조</h1><p>여러 Entity를 만들고 양방향 맵핑을 해준다. 이럴 경우 하나의 Row만을 원해서 쿼리문을 날리면 서로가 서로를 맵핑하며 호출하게 되고 똑같은 데이터가 반복적으로 출력되는 상황이 발생한다!<br>(@ManyToOne , @OneToMany 선어 시)</p>
<p>JPA는 디폴트로 맵핑된 데이터에 대해 FetchType.LAZY를 사용한다.<br>LAZY는 데이터를 한번에 가져오는게 아니라 나중에 가져오는거기 때문에<br>나중에 자식 엔티티를 들여다 보게 되고 이것이 반복되면서 순환참조가 일어난다!</p>
<h2 id="해결방법"><a href="#해결방법" class="headerlink" title="해결방법"></a>해결방법</h2><ol>
<li><p>@JsonIgnore :  이 어노테이션을 붙이면 json 데이터에 해당 프로퍼티는 null로 들어가게 된다. 즉, 데이터에 아예 포함이 안되게 된다.</p>
</li>
<li><p>@JsonManagerdReferernce, @JsonBackRefernce : 부모 클래스에  @JsonManagerdReferernce 자식 클래스에 @JsonBackRefernce를 선언해주면 양방향 맵핑을 예방 할 수 있다.</p>
</li>
<li><p>DTO 사용 : 위와 같은 상황이 발생하게 되면 주 원인은 양방향 맵핑이기도 하지만 더 정확 하게는 entity 자체를 resposnse로 리턴한데에 있다. Entity 자체를 return 하지 말고, dto객체를 만들어 필요한 데이터만 옮겨 담아 client로 리턴하면 순환참조와 관련된 문제를 방어 할 수 있다.</p>
</li>
</ol>
<p> 정리를 하자면 json serialize 과정에서 null로 세팅하고자 하면 @JsonIgnore 사용하면 되고, 순환참조에 대한 문제를 해결하고자 한다면 부모 클래스측에 @JsonManagedReference를, 자식측에 @JsonBackReference를 Annotation에 추가해주면 된다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/03/27/%EC%88%9C%ED%99%98%EC%B0%B8%EC%A1%B0/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/03/27/%EC%98%88%EC%99%B8%EC%B2%98%EB%A6%AC/"
                            aria-label=": 예외처리"
                        >
                            예외처리
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-03-27T11:44:09-07:00">
	
		    Mar 27, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%EC%9D%B4%EB%A1%A0%EB%85%B8%ED%8A%B8/">이론노트</a>, <a class="category-link" href="/categories/%EC%9D%B4%EB%A1%A0%EB%85%B8%ED%8A%B8/Java/">Java</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="예외처리"><a href="#예외처리" class="headerlink" title="예외처리"></a>예외처리</h1><ol>
<li>예외란?</li>
</ol>
<p>오류란 개발자가 미리 예측하여 처리 할 수 없다 이와 같은 문제는 심각한 문제가 될 수 있는 문제지만 이것은 에러는 개발자가 신경을 쓰지 않아도 되는 부분이다. ( 즉 시스템에 변화를 주어 문제를 처리해야 하는 경우가 일반적이다 )</p>
<p> 하지만 예외는 개발자가 처리 할 수 있기 때문에 예외를 구분하고 그에 따른 처리 방법을 명확히 알고 적용하는 것이 중요하다.</p>
<p>Exception은 수 많은 자식 클래스를 가지고 있다. 그 중 RuntimeException을 주목해야 한다. </p>
<h2 id="RuntimeException"><a href="#RuntimeException" class="headerlink" title="RuntimeException"></a>RuntimeException</h2><p>RuntimeException은 CheckedException과 UncheckedException을 구분하는 기준이다. Exception의 자식 클래스 중 RuntimeException을 제외한 모든 클래스는 CheckedException이며 RuntimeException과 그의 자식 클래스 들을 Unchecked Exception이라 부른다. </p>
<h2 id="CheckedException"><a href="#CheckedException" class="headerlink" title="CheckedException"></a>CheckedException</h2><p>컴파일 단계에서 명확하게 Exception 체크가 가능한 것을 Checked Exception이라 하며, 실행 과정 중 어떠한 특정 논리에 의해 발견되는 Exception을 Uncheck Exception이라 한다. </p>
<h2 id="에러의-roll-back-여부"><a href="#에러의-roll-back-여부" class="headerlink" title="에러의 roll-back 여부"></a>에러의 roll-back 여부</h2><p>또한 트랜잭션의 roll-back 여부이다. 기본적응로 Checked Exception은 예외가 발생하면 트랜잭션을 roll-back하지 않고 예외를 던져준다. 하지만 Unchecked Exception은 예외 발생 시 트랜잭션을 roll-back 한다는 점에서 차이가 있다. 트랜잰션의 전파방식 즉 어떻게 묶어 놓느냐에 따라서 Check, Uncheck 영향도가 크디ㅏ. Roll-back이 되는 범위가 달라지기 때문에 개발자가 이를 인지하지 못하면 실행결과가 맞지 않거나 예상치 못한 예외가 발생 할 수 있다. 그러므로 이를 인지하고 트랜잭션을 적용 시킬 때 전파방식과 롤백규칙을 적절하게 사용해야한다..</p>
<h2 id="예외-처리-방법"><a href="#예외-처리-방법" class="headerlink" title="예외 처리 방법"></a>예외 처리 방법</h2><ol>
<li>다른 작업 흐름으로 유도하는 예외 복구</li>
<li>처리하지 않고 호출한 쪽으로 throw 던져주는 예외 회피</li>
<li>명확한 의미의 예외로 전환 후 throw 던져주는 예외 전환</li>
</ol>
<h2 id="Throws-vs-throw"><a href="#Throws-vs-throw" class="headerlink" title="Throws vs throw"></a>Throws vs throw</h2><p>Throws는 현재 메서드에서 자신을 호출한 상위 메서드로 Exception을 발생시킴<br>throw는 억지로 에러를 발생시키고자 할 때 사용한다 ( 현재 메서드, 혹은 상위 메서드로 )</p>
<p>즉, throws는 예외를 메인까지 전달해주는 매개체이고 , throw는 내가 인위적으로 특정 예외를 발생 할 때 new로 만들어서 쓰인다!</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/03/27/%EC%98%88%EC%99%B8%EC%B2%98%EB%A6%AC/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
          <li class="pagination-next">
            <a
                class="btn btn--default btn--small"
                href="/archives/2021/page/2/"
                aria-label="OLDER POSTS"
            >
              <span>OLDER POSTS</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 1 of 5</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2021 이상권. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">이상권</h4>
        
            <div id="about-card-bio"><p>미래의 백엔드 개발자</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>개발자</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Busan
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover2.png');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
